
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="A MkDocs project to help you build a portfolio of your progress towards becoming an IT, IS, or CS professional." name="description"/>
<meta content="Trevor Hartman" name="author"/>
<link href="Chapter_9.html" rel="prev"/>
<link href="../CIS-18/week_1.html" rel="next"/>
<link href="../assets/images/favicon.ico" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-9.0.13" name="generator"/>
<title>Database Performance Tuning and Query Optimization - THartmanOfTheRedwoods Wiki</title>
<link href="../assets/stylesheets/main.ffa9267a.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto+Slab";--md-code-font:"Roboto+Mono"}</style>
<link href="../css/mode.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../assets/javascripts/glightbox.min.js"></script></head>
<body data-md-color-accent="red" data-md-color-primary="red" data-md-color-scheme="slate" dir="ltr">
<script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#database-performance-tuning-and-query-optimization">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="THartmanOfTheRedwoods Wiki" class="md-header__button md-logo" data-md-component="logo" href="../index.html" title="THartmanOfTheRedwoods Wiki">
<img alt="logo" src="../assets/images/simple_sign_logo_64.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            THartmanOfTheRedwoods Wiki
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Database Performance Tuning and Query Optimization
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="red" data-md-color-media="" data-md-color-primary="red" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_2" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"></path></svg>
</label>
</form>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../index.html">
      Home
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../android/getapk.html">
        Android
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../git/gitflow.html">
        Git
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../java/format_specifiers.html">
        Java
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../markdown-cheat-sheet.html">
      Markdown
    </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../tomcat/install.html">
        Tomcat
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../tux/os_command_map.html">
        Tux
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../vim/cheat-sheet.html">
        Vim
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../virtualbox/win11install.html">
        VirtualBox
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../windows/os_command_map.html">
        Windows
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../hardware/cables.html">
        Hardware
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../archive.html">
        Class Notes
      </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="THartmanOfTheRedwoods Wiki" class="md-nav__button md-logo" data-md-component="logo" href="../index.html" title="THartmanOfTheRedwoods Wiki">
<img alt="logo" src="../assets/images/simple_sign_logo_64.png"/>
</a>
    THartmanOfTheRedwoods Wiki
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../index.html">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Android
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
          Android
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../android/getapk.html">
        APK Extract
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Git
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
          Git
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../git/gitflow.html">
        Workflows
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Java
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
          Java
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../java/format_specifiers.html">
        Format Specifiers
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../java/loop_usage.html">
        Loop Usage
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../java/operators.html">
        Operators
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../java/associativity.html">
        Operator Precedence &amp; Associativity
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../markdown-cheat-sheet.html">
        Markdown
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Tomcat
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
          Tomcat
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../tomcat/install.html">
        Install
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Tux
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
          Tux
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../tux/os_command_map.html">
        Command Cheat-sheet
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tux/imagemagick.html">
        ImageMagick
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tux/pandoc.html">
        Pandoc
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tux/parallel.html">
        Parallel
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tux/ssh.html">
        SSH
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tux/tesseract.html">
        Tesseract
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Vim
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
          Vim
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../vim/cheat-sheet.html">
        Cheatsheet
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          VirtualBox
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
          VirtualBox
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../virtualbox/win11install.html">
        Install
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
          Windows
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
          Windows
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/os_command_map.html">
        Command Cheat-sheet
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_10_2" id="__nav_10_2_label" tabindex="0">
          Network
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_10_2">
<span class="md-nav__icon md-icon"></span>
          Network
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/arp.html">
        Arp
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/nbtstat.html">
        Nbtstat
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/netstat.html">
        Netstat
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/ping.html">
        Ping
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/ipconfig.html">
        Ipconfig
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/net.html">
        Net
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/nslookup.html">
        Nslookup
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../windows/network/tracert.html">
        Tracert
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
          Hardware
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware/cables.html">
        Cables
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
          Class Notes
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_12_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_12">
<span class="md-nav__icon md-icon"></span>
          Class Notes
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../archive.html">
        Index
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fun.html">
        Fun
      </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_12_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_12_3" id="__nav_12_3_label" tabindex="0">
          CIS-50
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_12_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_12_3">
<span class="md-nav__icon md-icon"></span>
          CIS-50
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_1.html">
        Database Systems
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_2.html">
        Data Models
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_3.html">
        The Relational Database Model
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="joins_ns.html">
        Joins
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_4.html">
        Entity Relationship Modeling
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_6.html">
        Normalization
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_7.html">
        Structured Query Language
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="cheatsheets.html">
        SQL Cheat-sheets
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_5.html">
        Advanced Data Modeling
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="Chapter_9.html">
        Database Design
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Database Performance Tuning and Query Optimization
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="Chapter_11.html">
        Database Performance Tuning and Query Optimization
      </a>
<nav aria-label="Sub-Menu" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Sub-Menu
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#database-performance-tuning-and-query-optimization">
    Database Performance Tuning and Query Optimization
  </a>
<nav aria-label="Database Performance Tuning and Query Optimization" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-tuning-concepts">
    Performance Tuning Concepts
  </a>
<nav aria-label="Performance Tuning Concepts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-tuning-client-and-server">
    Performance Tuning Client and Server
  </a>
<nav aria-label="Performance Tuning Client and Server" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#client-side">
    Client Side
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#server-side">
    Server Side
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dbms-architecture">
    DBMS Architecture
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#database-query-optimization-modes">
    Database Query Optimization Modes
  </a>
<nav aria-label="Database Query Optimization Modes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#2-principles-of-query-optimization">
    2 Principles of Query Optimization
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classification-of-query-optimization-algorithmsmodes">
    Classification of Query Optimization Algorithms/Modes
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#database-statistics">
    Database Statistics
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-processing">
    Query Processing
  </a>
<nav aria-label="Query Processing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#3-phases-of-query-processing">
    3 Phases of Query Processing
  </a>
<nav aria-label="3 Phases of Query Processing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-parsing-phase">
    SQL Parsing Phase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-execution-phase">
    SQL Execution Phase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-fetching-phase">
    SQL Fetching Phase
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-processing-bottlenecks">
    Query Processing Bottlenecks
  </a>
<nav aria-label="Query Processing Bottlenecks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#typical-bottlenecks-and-performance-recommendations">
    Typical Bottlenecks and Performance Recommendations
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexes-and-query-optimization">
    Indexes and Query Optimization
  </a>
<nav aria-label="Indexes and Query Optimization" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#index-data-structures">
    Index Data Structures
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizer-choices">
    Optimizer Choices
  </a>
<nav aria-label="Optimizer Choices" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizer-algorithms">
    Optimizer Algorithms
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizer-hints">
    Optimizer Hints
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-performance-tuning">
    SQL Performance Tuning
  </a>
<nav aria-label="SQL Performance Tuning" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#index-selectivity">
    Index Selectivity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conditional-expressions">
    Conditional Expressions
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-formulation">
    Query Formulation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dbms-performance-tuning">
    DBMS Performance Tuning
  </a>
<nav aria-label="DBMS Performance Tuning" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#server-side-tuning">
    Server Side Tuning
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_12_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_12_4" id="__nav_12_4_label" tabindex="0">
          CIS-18
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_12_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_12_4">
<span class="md-nav__icon md-icon"></span>
          CIS-18
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_1.html">
        Week 1 - Review
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/sprint.html">
        Sprint Planning
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/user_story_intro.html">
        User Story Into
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/user_story_lesson.html">
        User Story Lesson
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_2.html">
        Week 2 - Fundamental OOP Principles
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/oo_principles.html">
        Key OO Principles
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_3.html">
        Week 3 - Observer Design Pattern
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_4.html">
        Week 4 - Decorator Design Pattern
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_5.html">
        Week 5 - Factory Design Pattern
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_7.html">
        Week 7 - Singleton Design Pattern
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_8.html">
        Week 8 - Command Design Pattern
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_9.html">
        Week 9 - Adapter &amp; Facade Design Patterns
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_10.html">
        Week 10 - Template Method Design Pattern
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-18/week_12.html">
        Week 12 - Iterator and Composite Design Patterns
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_12_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_12_5" id="__nav_12_5_label" tabindex="0">
          CIS-12
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_12_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_12_5">
<span class="md-nav__icon md-icon"></span>
          CIS-12
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-12/week_1.html">
        Week 1 - Introduction to Programming
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-12/week_2.html">
        Week 2 - Variables and Operators
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-12/week_4.html">
        Week 4 - Methods
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-12/week_6.html">
        Week 6 - Conditions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-12/week_7.html">
        Week 7 - Methods Take 2
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-12/week_10.html">
        Week 10 - Arrays
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../CIS-12/week_12.html">
        Week 12 - Objects
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Sub-Menu" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Sub-Menu
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#database-performance-tuning-and-query-optimization">
    Database Performance Tuning and Query Optimization
  </a>
<nav aria-label="Database Performance Tuning and Query Optimization" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-tuning-concepts">
    Performance Tuning Concepts
  </a>
<nav aria-label="Performance Tuning Concepts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-tuning-client-and-server">
    Performance Tuning Client and Server
  </a>
<nav aria-label="Performance Tuning Client and Server" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#client-side">
    Client Side
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#server-side">
    Server Side
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dbms-architecture">
    DBMS Architecture
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#database-query-optimization-modes">
    Database Query Optimization Modes
  </a>
<nav aria-label="Database Query Optimization Modes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#2-principles-of-query-optimization">
    2 Principles of Query Optimization
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#classification-of-query-optimization-algorithmsmodes">
    Classification of Query Optimization Algorithms/Modes
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#database-statistics">
    Database Statistics
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-processing">
    Query Processing
  </a>
<nav aria-label="Query Processing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#3-phases-of-query-processing">
    3 Phases of Query Processing
  </a>
<nav aria-label="3 Phases of Query Processing" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-parsing-phase">
    SQL Parsing Phase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-execution-phase">
    SQL Execution Phase
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-fetching-phase">
    SQL Fetching Phase
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-processing-bottlenecks">
    Query Processing Bottlenecks
  </a>
<nav aria-label="Query Processing Bottlenecks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#typical-bottlenecks-and-performance-recommendations">
    Typical Bottlenecks and Performance Recommendations
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#indexes-and-query-optimization">
    Indexes and Query Optimization
  </a>
<nav aria-label="Indexes and Query Optimization" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#index-data-structures">
    Index Data Structures
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizer-choices">
    Optimizer Choices
  </a>
<nav aria-label="Optimizer Choices" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizer-algorithms">
    Optimizer Algorithms
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#optimizer-hints">
    Optimizer Hints
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#sql-performance-tuning">
    SQL Performance Tuning
  </a>
<nav aria-label="SQL Performance Tuning" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#index-selectivity">
    Index Selectivity
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#conditional-expressions">
    Conditional Expressions
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#query-formulation">
    Query Formulation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#dbms-performance-tuning">
    DBMS Performance Tuning
  </a>
<nav aria-label="DBMS Performance Tuning" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#server-side-tuning">
    Server Side Tuning
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1>Database Performance Tuning and Query Optimization</h1>
<h2 id="database-performance-tuning-and-query-optimization">Database Performance Tuning and Query Optimization<a class="headerlink" href="#database-performance-tuning-and-query-optimization" title="Permanent link">¶</a></h2>
<h3 id="performance-tuning-concepts">Performance Tuning Concepts<a class="headerlink" href="#performance-tuning-concepts" title="Permanent link">¶</a></h3>
<ul>
<li><strong>database performance tuning:</strong> A set of activities and procedures designed to reduce the response time of a database system that is, to ensure that an end user query is processed by the DBMS in the minimum amount of time.</li>
</ul>
<h4 id="performance-tuning-client-and-server">Performance Tuning Client and Server<a class="headerlink" href="#performance-tuning-client-and-server" title="Permanent link">¶</a></h4>
<ul>
<li>Most performance tuning focuses on minimizing I/O operations.</li>
</ul>
<h5 id="client-side">Client Side<a class="headerlink" href="#client-side" title="Permanent link">¶</a></h5>
<ul>
<li><strong>SQL Performance Tuning:</strong> Generate optimal SQL queries to get the correct answer in least amount of time using the minimum server resources.</li>
</ul>
<h5 id="server-side">Server Side<a class="headerlink" href="#server-side" title="Permanent link">¶</a></h5>
<ul>
<li><strong>DBMS Performance Tuning:</strong> Address client requests as quickly as possible while optimizing compute resources.</li>
</ul>
<h4 id="dbms-architecture">DBMS Architecture<a class="headerlink" href="#dbms-architecture" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Data Files:</strong> One of, generally, several files in a DBMS that stores a databases data: rows, tables, indexes, etc.</li>
<li><strong>Extent:</strong> Predefined data-file expansion increment.</li>
<li><strong>Table Space/File Group:</strong> Logically grouped data files. Common table spaces are: System (i.e. data-dictionary), user data, indexes, temporary (sorts &amp; grouping).</li>
<li><strong>data cache/buffer cache:</strong> Reserved memory area caching sys-catalog, indexes, and read/write data.</li>
<li><strong>SQL cache/Procedure cache:</strong> Reserved memory area storing processed recent SQL queries, stored procedures, triggers, and functions.</li>
<li><strong>I/O Request:</strong> Reads/Writes data from data-cache to physical device in blocks of powers of 2.
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_002.png"><img alt="Basic RDBMS Architecture" src="images/chap11_002.png"/></a></li>
<li>Listener: Handles processing of client requests.</li>
<li>User: User process per client.</li>
<li>Scheduler: Organizes concurrent requests.</li>
<li>Optimizer: Analyzes SQL and optimizes data access.</li>
</ul>
<h4 id="database-query-optimization-modes">Database Query Optimization Modes<a class="headerlink" href="#database-query-optimization-modes" title="Permanent link">¶</a></h4>
<h5 id="2-principles-of-query-optimization">2 Principles of Query Optimization<a class="headerlink" href="#2-principles-of-query-optimization" title="Permanent link">¶</a></h5>
<ul>
<li>Optimum execution order for fastest exec time</li>
<li>Optimum site selection to minimize I/O and communication time.</li>
</ul>
<h5 id="classification-of-query-optimization-algorithmsmodes">Classification of Query Optimization Algorithms/Modes<a class="headerlink" href="#classification-of-query-optimization-algorithmsmodes" title="Permanent link">¶</a></h5>
<ul>
<li>Classification by Order:<ul>
<li><strong>Automatic Query Optimization:</strong> DBMS finds most efficient access path (favored, but at the expense of CPU usage).</li>
<li><strong>Manual query Optimization:</strong> End user finds most efficient access path</li>
</ul>
</li>
<li>Classification by Timing of Optimizations<ul>
<li><strong>Static Query Optimization:</strong> Access path is predetermined at compile time (i.e. in code like C#)</li>
<li><strong>Dynamic Query Optimization:</strong> Access path is determined at run-time using most up-to-data info about the RDBMS.</li>
</ul>
</li>
<li>Classification by Info Type<ul>
<li><strong>Statistically Based Query Optimization:</strong> Statistically info about database is used to determine access path.<ul>
<li><strong>Dynamic Statistical Generation Mode:</strong> DBMS automatically updates database access and statistics.</li>
<li><strong>Manual Statistical Generation Mode:</strong> DBA must periodically run a routine to generate data access statistics.</li>
</ul>
</li>
<li><strong>Rule-Based Query Optimization:</strong> Preset rules by DBA or End-User dictate access path.</li>
</ul>
</li>
</ul>
<h4 id="database-statistics">Database Statistics<a class="headerlink" href="#database-statistics" title="Permanent link">¶</a></h4>
<ul>
<li>Include statistics on: # CPUs, CPU Speed, Temp Space Avail., # rows, # disk blocks used, Max/Avg row length, # Cols/Row, 
<a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_003.png"><img alt="Sample Database Statistics" src="images/chap11_003.png"/></a></li>
<li>Provides a snapshot of DB characteristics.</li>
<li>Can be gathered manually or automatically (ANALYZE command gathers stats)<ul>
<li>Oracle: ANALYZE <table|index> object_name COMPUTE STATISTICS;</table|index></li>
<li>MySQL: ANALYZE TABLE <table>;</table></li>
<li>DB2: RUNSTATS</li>
<li>SQL Server: UPDATE STATISTICS <table|view> [<index>]</index></table|view></li>
</ul>
</li>
</ul>
<h3 id="query-processing">Query Processing<a class="headerlink" href="#query-processing" title="Permanent link">¶</a></h3>
<h4 id="3-phases-of-query-processing">3 Phases of Query Processing<a class="headerlink" href="#3-phases-of-query-processing" title="Permanent link">¶</a></h4>
<ol>
<li>Parsing: Parses SQL and chooses most efficient execution plan.</li>
<li>Execution: Executes query based on chosen plan.</li>
<li>Fetching: Fetches data and returns result set.</li>
</ol>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_004.png"><img alt="Query Processing" src="images/chap11_004.png"/></a></p>
<details class="note" open="open">
<summary>Note</summary>
<p>Processing DDL (Create, etc.) is different then processing DML (SELECT, INSERT, UPDATE, DELETE as DML deals with user data while DDL changes the schema/system catalog.</p>
</details>
<h5 id="sql-parsing-phase">SQL Parsing Phase<a class="headerlink" href="#sql-parsing-phase" title="Permanent link">¶</a></h5>
<ul>
<li><strong>Query Optimizer:</strong> DBMS process that parses query and optimizes data access path.<ul>
<li>Steps of Query Optimizer:<ul>
<li>Validate SQL syntax</li>
<li>Validate SQL against Data Dictionary for table/column objects</li>
<li>Validate User Access Rights via Data Dictionary</li>
<li>Break SQL into atomic parts.</li>
<li>Optimize SQL to equivalent faster query</li>
<li>Prepare SQL for execution with efficient access plan</li>
</ul>
</li>
</ul>
</li>
<li><strong>Access/Execution Plan:</strong> Compilation time plan that determines how an application query will access the database at run-time<ul>
<li>If the Access Plan exists in SQL Cache, DBMS will re-use plan to save time.</li>
<li>If not in cache, optimizer will:<ul>
<li>Evaluate plans and pick indexes for optimal join operations</li>
<li>Places the chosen plan into the SQL Cache</li>
</ul>
</li>
<li><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_005.png"><img alt="Sample DBMS Access Plan" src="images/chap11_005.png"/></a></li>
</ul>
</li>
</ul>
<h5 id="sql-execution-phase">SQL Execution Phase<a class="headerlink" href="#sql-execution-phase" title="Permanent link">¶</a></h5>
<ul>
<li>All I/O operations in Execution Plan are executed, and proper locks are acquired for data access.</li>
<li>Resulting data is stored in the DBMS data cache<ul>
<li>Rows matching conditions, order bys, grouping are completed</li>
</ul>
</li>
<li>Transaction commands are completed during SQL Parsing Phase and SQL Execution Phase.</li>
</ul>
<h5 id="sql-fetching-phase">SQL Fetching Phase<a class="headerlink" href="#sql-fetching-phase" title="Permanent link">¶</a></h5>
<ul>
<li>Facilitates migrating data from server cache to client cache.</li>
<li>Temporary table space may be used to allow clients to fetch data in batches.</li>
</ul>
<h4 id="query-processing-bottlenecks">Query Processing Bottlenecks<a class="headerlink" href="#query-processing-bottlenecks" title="Permanent link">¶</a></h4>
<ul>
<li>The more complex a query, the higher chance of a <strong>query processing bottleneck</strong></li>
<li>The more complex a system and the tighter coupled components, the higher chance of a <strong>component bottleneck</strong></li>
</ul>
<h5 id="typical-bottlenecks-and-performance-recommendations">Typical Bottlenecks and Performance Recommendations<a class="headerlink" href="#typical-bottlenecks-and-performance-recommendations" title="Permanent link">¶</a></h5>
<ol>
<li>CPU: Match CPU to workload<ul>
<li>High CPU utilization could mean a mismatch between CPU and workload</li>
<li>Could also mean not enough of another component like RAM (swapping?).</li>
</ul>
</li>
<li>RAM: SQL Cache, Data Cache, DBMS processes, and OS compete for RAM, so it should be right-sized dependent on system and database purpose.</li>
<li>Hard Disks: Slow disks can bottleneck performance, so match HD Speed and I/O transfer rates to desired workload performance.<ul>
<li>Faster Disks, such as SSDs, can offset some of the RAM bottlenecks via <strong>Virtual Memory</strong></li>
</ul>
</li>
<li>Network: Network congestion (i.e. network demand exceeds capacity) can cause bottlenecks.<ul>
<li>Use QoS to grant application priority.</li>
<li>Limit the number of clients on the network.</li>
<li>Limit the network to just qualified applications.</li>
</ul>
</li>
<li>Application Code: Poorly designed DBs and Poorly designed code often cause bottlenecks.<ul>
<li>Write applications that Lazy load data</li>
<li>Optimize or eliminate AdHoc Queries</li>
<li>Apply code optimization techniques.</li>
<li>Redesign poorly architected databases</li>
</ul>
</li>
</ol>
<h3 id="indexes-and-query-optimization">Indexes and Query Optimization<a class="headerlink" href="#indexes-and-query-optimization" title="Permanent link">¶</a></h3>
<details class="note" open="open">
<summary>Note</summary>
<p>The purpose of indexes is to speed up access to specific rows in large tables. So why not index everything? First, indexes also consume space, so space constraints can limit index usage. Further, indexing every column can harm the query optimizer performance by forcing it to analyze more index options while building its query plan. Third, low <strong>Data Sparsity,</strong> which refers to the range of values in a column, can make indexes moot since they contain a relatively small number of keys to a large subset of rows. High <strong>Data Sparsity</strong> columns, on the other hand, are ideal candidates for indexes.</p>
</details>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_006.png"><img alt="Example Index Illustration" src="images/chap11_006.png"/></a></p>
<h4 id="index-data-structures">Index Data Structures<a class="headerlink" href="#index-data-structures" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Hash Index:</strong> Simple and fast lookups via a <strong>key</strong> that is <strong>hashed</strong> into a value that points to matching database rows. Great for indexes hitting equality conditions.</li>
<li><strong>B-tree Index:</strong> Auto-balancing data-structure, where the leaf nodes contain pointers to the data rows. Most common index, and is great for high sparsity data.</li>
<li><strong>Bitmap Index:</strong> Index suited best for low sparsity data, and is represented by BIT Arrays, where each BIT represents if the row pointed to meets a condition. Very low space usage.</li>
</ul>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_007.png"><img alt="B-Tree and Bitmap Index Comparison" src="images/chap11_007.png"/></a></p>
<h3 id="optimizer-choices">Optimizer Choices<a class="headerlink" href="#optimizer-choices" title="Permanent link">¶</a></h3>
<details class="note" open="open">
<summary>Note</summary>
<p>SQL Parsing is performed by a query optimizer and decides which indexes to use, the order of table joins, how to perform those joins, and more.</p>
</details>
<h4 id="optimizer-algorithms">Optimizer Algorithms<a class="headerlink" href="#optimizer-algorithms" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Rule-based Optimizer:</strong> Decides how to execute a query by assigning fixed costs via preset rules (e.g. costs are based off of <strong>full-table-scans</strong>, PK/Index matches, etc.)</li>
<li><strong>Cost-based Optimizer:</strong> Decides query execution through algorithmic analysis of statistics about various DB objects (e.g. num-rows, num-columns, I/O speed, RAM, etc.)</li>
</ul>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_008.png"><img alt="Cost-based Optimizer Example" src="images/chap11_008.png"/></a></p>
<h4 id="optimizer-hints">Optimizer Hints<a class="headerlink" href="#optimizer-hints" title="Permanent link">¶</a></h4>
<ul>
<li><strong>Optimizer Hints:</strong> Are special instructions end-users can add to SQL queries to alter how the query optimizer decides to execute a query.</li>
</ul>
<p><a class="glightbox" data-desc-position="bottom" data-height="auto" data-width="100%" href="images/chap11_009.png"><img alt="Optimizer Hints" src="images/chap11_009.png"/></a></p>
<h3 id="sql-performance-tuning">SQL Performance Tuning<a class="headerlink" href="#sql-performance-tuning" title="Permanent link">¶</a></h3>
<details class="note" open="open">
<summary>Note</summary>
<p>Most current RDBMS already do a solid job of query optimization, but its still a good idea to help it out and limit the server-side processing. With that said, most techniques are RDBMS specific.</p>
</details>
<h4 id="index-selectivity">Index Selectivity<a class="headerlink" href="#index-selectivity" title="Permanent link">¶</a></h4>
<ul>
<li>Using indexes is the #1 step in performance optimization.</li>
<li>Most useful for culling a small subset of rows from a large table.</li>
<li>Too many indexes slow down INSERT, UPDATE, and DELETE operations.</li>
<li>So when are they used?<ol>
<li>When an <strong>Indexed</strong> column appears alone in <strong>WHERE</strong> or <strong>HAVING</strong> clause.</li>
<li>When an <strong>Indexed</strong> column appears alone in <strong>GROUP BY</strong> or <strong>ORDER BY</strong> clause.</li>
<li>When a <strong>MAX/MIN</strong> function wraps and <strong>Indexed</strong> column.</li>
<li>When an <strong>Indexed</strong> column has <strong>high data sparsity</strong></li>
</ol>
</li>
<li>So how do we increase the likelihood of index use (i.e. HIGH <strong>Index Selectivity</strong>)<ol>
<li>Create indexes for each single attribute commonly used in a WHERE, HAVING, GROUP BY, or ORDER BY clause.</li>
<li>Avoid indexes on <strong>small tables</strong> or tables with <strong>low data sparsity</strong>.</li>
<li>Always declare PK and FK to coerce <strong>join</strong> operations to use <strong>Indexes</strong></li>
<li>Create indexes on non-PK/FK columns commonly used in <strong>joins</strong></li>
<li>When the RDBMS supports it (Oracle, SQL Server, DB2) use <strong>function-based indexes</strong> (i.e. indexes on derived types or types with functions in them) that are commonly used in reports.</li>
</ol>
</li>
</ul>
<h4 id="conditional-expressions">Conditional Expressions<a class="headerlink" href="#conditional-expressions" title="Permanent link">¶</a></h4>
<ul>
<li>Typically in the WHERE or HAVING clauses.</li>
<li>So how can we format conditional expressions to help the query optimizer?<ol>
<li>Use simple columns or literals as operands in a conditional expression.</li>
<li>Numeric field comparisons are faster than character, date, and NULL comparisons.</li>
<li>Equality comparisons are generally faster than inequality comparisons.</li>
<li>Whenever possible, transform conditional expressions to use literals (i.e. remove/simplify Math or derived parts of query if possible)</li>
<li>When using multiple conditional expressions, write the “=” conditions first.</li>
<li>Short Circuit Logic Conditions:<ul>
<li>If you use multiple AND conditions, write the condition most likely to be false first.</li>
<li>When using multiple OR conditions, put the condition most likely to be true first.</li>
</ul>
</li>
<li>Whenever possible, try to avoid the use of the NOT logical operator.</li>
</ol>
</li>
</ul>
<h3 id="query-formulation">Query Formulation<a class="headerlink" href="#query-formulation" title="Permanent link">¶</a></h3>
<ul>
<li>Step to Formulate our Queries<ol>
<li>Identify columns and computations required<ul>
<li>Simple expressions?</li>
<li>Aggregate functions?</li>
<li>Granularity? (i.e. should you use sub-queries and or views)</li>
</ul>
</li>
<li>Identify Source Tables</li>
<li>Determine PK/FK or other attribute table joins.</li>
<li>Determine criteria<ul>
<li>Simple WHERE?</li>
<li>Compared to a list of values? (i.e. IN is needed)</li>
<li>Nested comparisons?</li>
<li>Grouped Data?</li>
</ul>
</li>
<li>Determine order</li>
</ol>
</li>
</ul>
<h3 id="dbms-performance-tuning">DBMS Performance Tuning<a class="headerlink" href="#dbms-performance-tuning" title="Permanent link">¶</a></h3>
<h4 id="server-side-tuning">Server Side Tuning<a class="headerlink" href="#server-side-tuning" title="Permanent link">¶</a></h4>
<p>(See above for what’s stored in each Cache)</p>
<ul>
<li>Size the data cache appropriately</li>
<li>Size the SQL Cache appropriately</li>
<li>Size the sort/ordering cache</li>
<li>Decide which Optimizer mode is best suited Rule or Cost.</li>
<li>Store as much of DB in primary memory as possible to minimize I/O<ul>
<li>Some DBs are fully <strong>In-Memory Databases</strong></li>
</ul>
</li>
<li>Use I/O Accelerators<ul>
<li>SSD drives</li>
<li>RAID sets (Redundant Array of Independent Disks)</li>
<li>Minimize Disk Contention<ul>
<li>Put <strong>Sys-Tables</strong> on own volume</li>
<li>Balance performance and usability by splitting up <strong>User Data Table Spaces</strong><ul>
<li>Put high-usage tables on own volume.</li>
</ul>
</li>
<li>Create unique <strong>Index Table Space</strong> per application or user group.<ul>
<li>Put on own volumes if possible</li>
</ul>
</li>
<li>Create unique <strong>Temporary Table Space</strong> per application or user group.<ul>
<li>Put on own volumes if possible</li>
</ul>
</li>
<li>Use Oracle <strong>Index-organized tables</strong> or SQL Server <strong>Clustered Index Tables</strong> to help organize table spaces.</li>
<li>Use <strong>Table Partitioning</strong> by attribute if available.</li>
</ul>
</li>
<li>Denormalize, but only when appropriate.</li>
<li>Store derived columns in tables when appropriate.</li>
</ul>
</li>
</ul>
</article>
</div>
</div>
</main>
<!-- Footer -->
<footer class="md-footer">
<!-- Further information -->
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<!-- Copyright and theme information -->
<div class="md-copyright">
<div class="md-copyright__highlight">
      ©2022 THartmanOfTheRedwoods Wiki, All rights reserved.
    </div>
  
  
    Made by
    <a href="https://github.com/viable-hartman/" rel="noopener" target="_blank">
      Trevor Hartman
    </a>
</div>
<!-- Social links -->
<div class="md-social">
<a class="md-social__link" href="https://github.com/THartmanOfTheRedwoods" rel="noopener" target="_blank" title="Github">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-social__link" href="mailto:trevor-hartman@redwoods.edu" rel="noopener" target="_blank" title="">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "content.code.annotate", "search.suggest", "search.highlight", "search.share", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": "1.0.0"}</script>
<script src="../assets/javascripts/bundle.2a6f1dda.min.js"></script>
<script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>